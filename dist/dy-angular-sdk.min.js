!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(n,t){if("__setXHR_"===n){var r=t(this);r instanceof Function&&r(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="9.0.3",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(e,n,t){function r(r){function o(e){s.notify&&s.notify(e),f.progressFunc&&t(function(){f.progressFunc(e)})}function l(e){return null!=r._start&&a?{loaded:e.loaded+r._start,total:r._file.size,type:e.type,config:r,lengthComputable:!0,target:e.target}:e}function u(){e(r).then(function(e){a&&r._chunkSize&&!r._finished?(o({loaded:r._end,total:r._file.size,config:r,type:"progress"}),i.upload(r)):(r._finished&&delete r._finished,s.resolve(e))},function(e){s.reject(e)},function(e){s.notify(e)})}r.method=r.method||"POST",r.headers=r.headers||{};var s=r._deferred=r._deferred||n.defer(),f=s.promise;return r.disableProgress||(r.headers.__setXHR_=function(){return function(e){e&&e instanceof XMLHttpRequest&&(r.__XHR=e,r.xhrFn&&r.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=r,o(l(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=r,o(l(e)))},!1))}}),a?r._chunkSize&&r._end&&!r._finished?(r._start=r._end,r._end+=r._chunkSize,u()):r.resumeSizeUrl?e.get(r.resumeSizeUrl).then(function(e){r._start=r.resumeSizeResponseReader?r.resumeSizeResponseReader(e.data):parseInt((null==e.data.size?e.data:e.data.size).toString()),r._chunkSize&&(r._end=r._start+r._chunkSize),u()},function(e){throw e}):r.resumeSize?r.resumeSize().then(function(e){r._start=e,u()},function(e){throw e}):u():u(),f.success=function(e){return f.then(function(n){e(n.data,n.status,n.headers,r)}),f},f.error=function(e){return f.then(null,function(n){e(n.data,n.status,n.headers,r)}),f},f.progress=function(e){return f.progressFunc=e,f.then(null,null,function(n){e(n)}),f},f.abort=f.pause=function(){return r.__XHR&&t(function(){r.__XHR.abort()}),f},f.xhr=function(e){return r.xhrFn=function(n){return function(){n&&n.apply(f,arguments),e.apply(f,arguments)}}(r.xhrFn),f},f}var i=this;this.isResumeSupported=function(){return window.Blob&&Blob instanceof Function&&(new Blob).slice};var a=this.isResumeSupported();this.rename=function(e,n){return e.ngfName=n,e},this.jsonBlob=function(e){var n=new Blob([e],{type:"application/json"});return n._ngfBlob=!0,n},this.json=function(e){return angular.toJson(e)},this.upload=function(e){function n(e){return null!=e&&e instanceof Blob||e.flashId&&e.name&&e.size}function t(n,t){if(n._ngfBlob)return n;if(e._file=e._file||n,null!=e._start&&a){e._end&&e._end>=n.size&&(e._finished=!0,e._end=n.size);var r=n.slice(e._start,e._end||n.size);return r.name=n.name,r.ngfName=n.ngfName,e._chunkSize&&(t.append("_chunkSize",e._end-e._start),t.append("_chunkNumber",Math.floor(e._start/e._chunkSize)),t.append("_totalSize",e._file.size)),r}return n}function o(r,i,a){if(void 0!==i)if(angular.isDate(i)&&(i=i.toISOString()),angular.isString(i))r.append(a,i);else if(n(i)){var l=t(i,r),u=a.split(",");u[1]&&(l.ngfName=u[1].replace(/^\s+|\s+$/g,""),a=u[0]),e._fileKey=e._fileKey||a,r.append(a,l,l.ngfName||l.name)}else if(angular.isObject(i)){if(i.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+a;i.$$ngfCircularDetection=!0;try{for(var s in i)if(i.hasOwnProperty(s)&&"$$ngfCircularDetection"!==s){var f=null==e.objectKey?"[i]":e.objectKey;i.length&&parseInt(s)>-1&&(f=null==e.arrayKey?f:e.arrayKey),o(r,i[s],a+f.replace(/[ik]/g,s))}}finally{delete i.$$ngfCircularDetection}}else r.append(a,i)}function l(){e._chunkSize=i.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(n){var t,r=new FormData;n=n||e.fields||{},e.file&&(n.file=e.file);for(t in n)if(n.hasOwnProperty(t)){var i=n[t];e.formDataAppender?e.formDataAppender(r,t,i):o(r,i,t)}return r})}return e._isDigested||(e._isDigested=!0,l()),r(e)},this.http=function(n){return n.transformRequest=n.transformRequest||function(n){return window.ArrayBuffer&&n instanceof window.ArrayBuffer||n instanceof Blob?n:e.defaults.transformRequest[0].apply(this,arguments)},n._chunkSize=i.translateScalars(n.resumeChunkSize),n._chunkSize=n._chunkSize?parseInt(n._chunkSize.toString()):null,r(n)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1e3*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1e6*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1e9*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","UploadResize",function(e,n,t,r){function i(e,n){null==n||e.$dirty||(e.$setDirty?e.$setDirty():e.$dirty=!0)}function a(e,n,t,r){var i=l.attrGetter("ngfResize",n,t);if(!i||!l.isResizeSupported())return r();for(var a=e.length,o=function(){a--,0===a&&r()},u=function(n){return function(t){e.splice(n,1,t),o()}},s=function(e){return function(n){o(),e.$error="resize",e.$errorParam=(n?(n.message?n.message:n)+": ":"")+(e&&e.name)}},f=0;f<e.length;f++){var c=e[f];0===c.type.indexOf("image")?l.resize(c,i.width,i.height,i.quality).then(u(f),s(c)):o()}}function o(e,n,t,r){var i=[],a=l.attrGetter("ngfKeep",t,r);if(a===!0){if(!e||!e.length)return;var o=!1;if(l.attrGetter("ngfKeepDistinct",t,r)===!0){for(var u=n.length,s=0;s<e.length;s++){for(var f=0;u>f;f++)if(e[s].name===n[f].name){i.push(e[s]);break}f===u&&(n.push(e[s]),o=!0)}if(!o)return;e=n}else e=n.concat(e)}return{files:e,dupFiles:i,keep:a}}var l=r;return l.getAttrWithDefaults=function(e,n){return null!=e[n]?e[n]:null==l.defaults[n]?l.defaults[n]:l.defaults[n].toString()},l.attrGetter=function(n,t,r,i){if(!r)return this.getAttrWithDefaults(t,n);try{return i?e(this.getAttrWithDefaults(t,n))(r,i):e(this.getAttrWithDefaults(t,n))(r)}catch(a){if(n.search(/min|max|pattern/i))return this.getAttrWithDefaults(t,n);throw a}},l.shouldUpdateOn=function(e,n,t){var r=l.attrGetter("ngModelOptions",n,t);return r&&r.updateOn?r.updateOn.split(" ").indexOf(e)>-1:!0},l.updateModel=function(t,r,u,s,f,c,d){function g(a,o,f,d,g){var p=a&&a.length?a[0]:null;t&&(i(t,a),angular.forEach(t.$ngfValidations,function(e){t.$setValidity(e.name,e.valid)}),t&&t.$setViewValue(g?p:a)),s&&e(s)(u,{$files:a,$file:p,$newFiles:f,$duplicateFiles:d,$invalidFiles:o,$event:c});var h=l.attrGetter("ngfModelInvalid",r);h&&n(function(){e(h).assign(u,o)}),n(function(){})}var p=f,h=(t&&t.$modelValue||r.$$ngfPrevFiles||[]).slice(0),v=o(f,h,r,u);f=v.files;var m=v.dupFiles,$=!l.attrGetter("ngfMultiple",r,u)&&!l.attrGetter("multiple",r)&&!v.keep;r.$$ngfPrevFiles=f,l.validate(f,t,r,u,l.attrGetter("ngfValidateLater",r),function(){if(d)g(f,[],p,m,$);else{var e=l.attrGetter("ngModelOptions",r,u);if(!e||!e.allowInvalid){var t=[],i=[];angular.forEach(f,function(e){e.$error?i.push(e):t.push(e)}),f=t}a(f,r,u,function(){n(function(){g(f,i,p,m,$)},e&&e.debounce?e.debounce.change||e.debounce:0)})}});for(var b=h.length;b--;){var y=h[b];window.URL&&y.blobUrl&&(URL.revokeObjectURL(y.blobUrl),delete y.blobUrl)}},l}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,n,t,r){function i(e){var n=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(n&&n.length>2){var t=r.defaults.androidFixMinorVersion||4;return parseInt(n[1])<4||parseInt(n[1])===t&&parseInt(n[2])<t}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}function a(e,n,t,r,a,l,u,s){function f(){return"input"===n[0].tagName.toLowerCase()&&t.type&&"file"===t.type.toLowerCase()}function c(){return b("ngfChange")||b("ngfSelect")}function d(n){if(s.shouldUpdateOn("change",t,e)){for(var i=n.__files_||n.target&&n.target.files,a=[],o=0;o<i.length;o++)a.push(i[o]);s.updateModel(r,t,e,c(),a.length?a:null,n)}}function g(e){if(n!==e)for(var t=0;t<n[0].attributes.length;t++){var r=n[0].attributes[t];"type"!==r.name&&"class"!==r.name&&"id"!==r.name&&"style"!==r.name&&((null==r.value||""===r.value)&&("required"===r.name&&(r.value="required"),"multiple"===r.name&&(r.value="multiple")),e.attr(r.name,r.value))}}function p(){if(f())return n;var e=angular.element('<input type="file">');return g(e),e.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),o.push({el:n,ref:e}),document.body.appendChild(e[0]),e}function h(t){if(n.attr("disabled")||b("ngfSelectDisabled",e))return!1;var r=v(t);return null!=r?r:(m(t),i(navigator.userAgent)?setTimeout(function(){U[0].click()},0):U[0].click(),!1)}function v(e){var n=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if("touchstart"===e.type)return w=n?n[0].clientY:0,!0;if(e.stopPropagation(),e.preventDefault(),"touchend"===e.type){var t=n?n[0].clientY:0;if(Math.abs(t-w)>20)return!1}}function m(n){s.shouldUpdateOn("click",t,e)&&U.val()&&(U.val(null),s.updateModel(r,t,e,c(),null,n,!0))}function $(e){if(U&&!U.attr("__ngf_ie10_Fix_")){if(!U[0].parentNode)return void(U=null);e.preventDefault(),e.stopPropagation(),U.unbind("click");var n=U.clone();return U.replaceWith(n),U=n,U.attr("__ngf_ie10_Fix_","true"),U.bind("change",d),U.bind("click",$),U[0].click(),!1}U.removeAttr("__ngf_ie10_Fix_")}var b=function(e,n){return s.attrGetter(e,t,n)},y=[];y.push(e.$watch(b("ngfMultiple"),function(){U.attr("multiple",b("ngfMultiple",e))})),y.push(e.$watch(b("ngfCapture"),function(){U.attr("capture",b("ngfCapture",e))})),t.$observe("accept",function(){U.attr("accept",b("accept"))}),y.push(function(){t.$$observers&&delete t.$$observers.accept});var w=0,U=n;f()||(U=p()),U.bind("change",d),f()?n.bind("click",m):n.bind("click touchstart touchend",h),-1!==navigator.appVersion.indexOf("MSIE 10")&&U.bind("click",$),r&&r.$formatters.push(function(e){return(null==e||0===e.length)&&U.val()&&U.val(null),e}),e.$on("$destroy",function(){f()||U.remove(),angular.forEach(y,function(e){e()})}),l(function(){for(var e=0;e<o.length;e++){var n=o[e];document.body.contains(n.el[0])||(o.splice(e,1),n.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(n,U,d)}var o=[];return{restrict:"AEC",require:"?ngModel",link:function(i,o,l,u){a(i,o,l,u,e,n,t,r)}}}]),function(){function e(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}function n(n,t,r,i,a,o,l,u){function s(e){var o=n.attrGetter("ngfNoObjectUrl",a,r);n.dataUrl(e,o)["finally"](function(){t(function(){var n=(o?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl;u?i.css("background-image","url('"+(n||"")+"')"):i.attr("src",n),n?i.removeClass("ngf-hide"):i.addClass("ngf-hide")})})}t(function(){var t=r.$watch(a[o],function(t){var r=l;if("ngfThumbnail"===o&&(r||(r={width:i[0].clientWidth,height:i[0].clientHeight}),0===r.width&&window.getComputedStyle)){var a=getComputedStyle(i[0]);r={width:parseInt(a.width.slice(0,-2)),height:parseInt(a.height.slice(0,-2))}}return angular.isString(t)?(i.removeClass("ngf-hide"),u?i.css("background-image","url('"+t+"')"):i.attr("src",t)):void(!t||!t.type||0!==t.type.search(e(i[0]))||u&&0!==t.type.indexOf("image")?i.addClass("ngf-hide"):r&&n.isResizeSupported()?n.resize(t,r.width,r.height,r.quality).then(function(e){s(e)},function(e){throw e}):s(t))});r.$on("$destroy",function(){t()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,n,t){var r=e;return r.base64DataUrl=function(e){if(angular.isArray(e)){var n=t.defer(),i=0;return angular.forEach(e,function(t){r.dataUrl(t,!0)["finally"](function(){if(i++,i===e.length){var t=[];angular.forEach(e,function(e){t.push(e.$ngfDataUrl)}),n.resolve(t,e)}})}),n.promise}return r.dataUrl(e,!0)},r.dataUrl=function(e,r){if(r&&null!=e.$ngfDataUrl||!r&&null!=e.$ngfBlobUrl){var i=t.defer();return n(function(){i.resolve(r?e.$ngfDataUrl:e.$ngfBlobUrl,e)}),i.promise}var a=r?e.$$ngfDataUrlPromise:e.$$ngfBlobUrlPromise;if(a)return a;var o=t.defer();return n(function(){if(window.FileReader&&e&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||e.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||e.size<4e6)){var t=window.URL||window.webkitURL;if(t&&t.createObjectURL&&!r){var i;try{i=t.createObjectURL(e)}catch(a){return void n(function(){e.$ngfBlobUrl="",o.reject()})}n(function(){e.$ngfBlobUrl=i,i&&o.resolve(i,e)})}else{var l=new FileReader;l.onload=function(t){n(function(){e.$ngfDataUrl=t.target.result,o.resolve(t.target.result,e)})},l.onerror=function(){n(function(){e.$ngfDataUrl="",o.reject()})},l.readAsDataURL(e)}}else n(function(){e[r?"dataUrl":"blobUrl"]="",o.reject()})}),a=r?e.$$ngfDataUrlPromise=o.promise:e.$$ngfBlobUrlPromise=o.promise,a["finally"](function(){delete e[r?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),a},r}]);var t=angular.element("<style>.ngf-hide{display:none !important}</style>");document.getElementsByTagName("head")[0].appendChild(t[0]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(e,t){return{restrict:"AE",link:function(r,i,a){n(e,t,r,i,a,"ngfSrc",e.attrGetter("ngfResize",a,r),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(e,t){return{restrict:"AE",link:function(r,i,a){n(e,t,r,i,a,"ngfBackground",e.attrGetter("ngfResize",a,r),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(e,t){return{restrict:"AE",link:function(r,i,a){var o=e.attrGetter("ngfSize",a,r);n(e,t,r,i,a,"ngfThumbnail",o,e.attrGetter("ngfAsBackground",a,r))}}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,n,t){function r(e){var n="",t=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])n=e.substring(1,e.length-1);else{var i=e.split(",");if(i.length>1)for(var a=0;a<i.length;a++){var o=r(i[a]);o.regexp?(n+="("+o.regexp+")",a<i.length-1&&(n+="|")):t=t.concat(o.excludes)}else 0===e.indexOf("!")?t.push("^((?!"+r(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),n="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",n=n.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:n,excludes:t}}var i=e;return i.validatePattern=function(e,n){if(!n)return!0;var t=r(n),i=!0;if(t.regexp&&t.regexp.length){var a=new RegExp(t.regexp,"i");i=null!=e.type&&a.test(e.type)||null!=e.name&&a.test(e.name)}for(var o=t.excludes.length;o--;){var l=new RegExp(t.excludes[o],"i");i=i&&(null==e.type||l.test(e.type))&&(null==e.name||l.test(e.name))}return i},i.validate=function(e,n,t,r,a,o){function l(t,r,i){if(e){for(var a="ngf"+t[0].toUpperCase()+t.substr(1),o=e.length,l=null;o--;){var u=e[o],f=s(a,{$file:u});null==f&&(f=r(s("ngfValidate")||{}),l=null==l?!0:l),null!=f&&(i(u,f)||(u.$error=t,u.$errorParam=f,e.splice(o,1),l=!1))}null!==l&&n.$ngfValidations.push({name:t,valid:l})}}function u(t,r,i,a,l){if(e){var u=0,c=!1,d="ngf"+t[0].toUpperCase()+t.substr(1);e=void 0===e.length?[e]:e,angular.forEach(e,function(e){if(0!==e.type.search(i))return!0;var g=s(d,{$file:e})||r(s("ngfValidate",{$file:e})||{});g&&(f++,u++,a(e,g).then(function(n){l(n,g)||(e.$error=t,e.$errorParam=g,c=!0)},function(){s("ngfValidateForce",{$file:e})&&(e.$error=t,e.$errorParam=g,c=!0)})["finally"](function(){f--,u--,u||n.$ngfValidations.push({name:t,valid:!c}),f||o.call(n,n.$ngfValidations)}))})}}n=n||{},n.$ngfValidations=n.$ngfValidations||[],angular.forEach(n.$ngfValidations,function(e){e.valid=!0});var s=function(e,n){return i.attrGetter(e,t,r,n)};if(a)return void o.call(n);if(n.$$ngfValidated=!0,null==e||0===e.length)return void o.call(n);if(e=void 0===e.length?[e]:e.slice(0),l("pattern",function(e){return e.pattern},i.validatePattern),l("minSize",function(e){return e.size&&e.size.min},function(e,n){return e.size>=i.translateScalars(n)}),l("maxSize",function(e){return e.size&&e.size.max},function(e,n){return e.size<=i.translateScalars(n)}),l("validateFn",function(){return null},function(e,n){return n===!0||null===n||""===n}),!e.length)return void o.call(n,n.$ngfValidations);var f=0;u("maxHeight",function(e){return e.height&&e.height.max},/image/,this.imageDimensions,function(e,n){return e.height<=n}),u("minHeight",function(e){return e.height&&e.height.min},/image/,this.imageDimensions,function(e,n){return e.height>=n}),u("maxWidth",function(e){return e.width&&e.width.max},/image/,this.imageDimensions,function(e,n){return e.width<=n}),u("minWidth",function(e){return e.width&&e.width.min},/image/,this.imageDimensions,function(e,n){return e.width>=n}),u("ratio",function(e){return e.ratio},/image/,this.imageDimensions,function(e,n){for(var t=n.toString().split(","),r=!1,i=0;i<t.length;i++){var a=t[i],o=a.search(/x/i);a=o>-1?parseFloat(a.substring(0,o))/parseFloat(a.substring(o+1)):parseFloat(a),Math.abs(e.width/e.height-a)<1e-4&&(r=!0)}return r}),u("maxDuration",function(e){return e.duration&&e.duration.max},/audio|video/,this.mediaDuration,function(e,n){return e<=i.translateScalars(n)}),u("minDuration",function(e){return e.duration&&e.duration.min},/audio|video/,this.mediaDuration,function(e,n){return e>=i.translateScalars(n)}),u("validateAsyncFn",function(){return null},/./,function(e,n){return n},function(e){return e===!0||null===e||""===e}),f||o.call(n,n.$ngfValidations)},i.imageDimensions=function(e){if(e.$ngfWidth&&e.$ngfHeight){var r=n.defer();return t(function(){r.resolve({width:e.$ngfWidth,height:e.$ngfHeight})}),r.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var a=n.defer();return t(function(){return 0!==e.type.indexOf("image")?void a.reject("not image"):void i.dataUrl(e).then(function(n){function r(){var n=l[0].clientWidth,t=l[0].clientHeight;l.remove(),e.$ngfWidth=n,e.$ngfHeight=t,a.resolve({width:n,height:t})}function i(){l.remove(),a.reject("load error")}function o(){t(function(){l[0].parentNode&&(l[0].clientWidth?r():u>10?i():o())},1e3)}var l=angular.element("<img>").attr("src",n).css("visibility","hidden").css("position","fixed");l.on("load",r),l.on("error",i);var u=0;o(),angular.element(document.getElementsByTagName("body")[0]).append(l)},function(){a.reject("load error")})}),e.$ngfDimensionPromise=a.promise,e.$ngfDimensionPromise["finally"](function(){delete e.$ngfDimensionPromise}),e.$ngfDimensionPromise},i.mediaDuration=function(e){if(e.$ngfDuration){var r=n.defer();return t(function(){r.resolve(e.$ngfDuration)}),r.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var a=n.defer();return t(function(){return 0!==e.type.indexOf("audio")&&0!==e.type.indexOf("video")?void a.reject("not media"):void i.dataUrl(e).then(function(n){function r(){var n=l[0].duration;e.$ngfDuration=n,l.remove(),a.resolve(n)}function i(){l.remove(),a.reject("load error")}function o(){t(function(){l[0].parentNode&&(l[0].duration?r():u>10?i():o())},1e3)}var l=angular.element(0===e.type.indexOf("audio")?"<audio>":"<video>").attr("src",n).css("visibility","none").css("position","fixed");l.on("loadedmetadata",r),l.on("error",i);var u=0;o(),angular.element(document.body).append(l)},function(){a.reject("load error")})}),e.$ngfDurationPromise=a.promise,e.$ngfDurationPromise["finally"](function(){delete e.$ngfDurationPromise}),e.$ngfDurationPromise},i}]),ngFileUpload.service("UploadResize",["UploadValidate","$q","$timeout",function(e,n,t){var r=e,i=function(e,n,t,r){var i=Math.min(t/e,r/n);return{width:e*i,height:n*i}},a=function(e,t,r,a,o){var l=n.defer(),u=document.createElement("canvas"),s=document.createElement("img");return 0===t&&(t=s.width,r=s.height),s.onload=function(){try{var e=i(s.width,s.height,t,r);u.width=e.width,u.height=e.height;var n=u.getContext("2d");n.drawImage(s,0,0,e.width,e.height),l.resolve(u.toDataURL(o||"image/WebP",a||1))}catch(f){l.reject(f)}},s.onerror=function(){l.reject()},s.src=e,l.promise},o=function(e){for(var n=e.split(","),t=n[0].match(/:(.*?);/)[1],r=atob(n[1]),i=r.length,a=new Uint8Array(i);i--;)a[i]=r.charCodeAt(i);return new Blob([a],{type:t})};return r.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")},r.resize=function(e,i,l,u){var s=n.defer();return 0!==e.type.indexOf("image")?(t(function(){s.resolve("Only images are allowed for resizing!")}),s.promise):(r.dataUrl(e,!0).then(function(n){a(n,i,l,u,e.type).then(function(n){var t=o(n);t.name=e.name,s.resolve(t)},function(){s.reject()})},function(){s.reject()}),s.promise)},r}]),function(){function e(e,t,r,i,a,o,l,u,s){function f(){return t.attr("disabled")||p("ngfDropDisabled",e)}function c(e,n,t,r){var i=p("ngfDragOverClass",e,{$event:t}),a="dragover";if(angular.isString(i))a=i;else if(i&&(i.delay&&($=i.delay),i.accept||i.reject)){var o=t.dataTransfer.items;if(null!=o&&o.length)for(var l=i.pattern||p("ngfPattern",e,{$event:t}),s=o.length;s--;){if(!u.validatePattern(o[s],l)){a=i.reject;break}a=i.accept}else a=i.accept}r(a)}function d(e,n,t,r){function i(e,n,t){if(null!=n)if(n.isDirectory){var r=(t||"")+n.name;e.push({name:n.name,type:"directory",path:r});var a=n.createReader(),o=[];u++;var l=function(){a.readEntries(function(r){try{if(r.length)o=o.concat(Array.prototype.slice.call(r||[],0)),l();else{for(var a=0;a<o.length;a++)i(e,o[a],(t?t:"")+n.name+"/");u--}}catch(s){u--,console.error(s)}},function(){u--})};l()}else u++,n.file(function(n){try{u--,n.path=(t?t:"")+n.name,e.push(n)}catch(r){u--,console.error(r)}},function(){u--})}var a=[],u=0,s=e.dataTransfer.items;if(s&&s.length>0&&"file"!==l.protocol())for(var f=0;f<s.length;f++){if(s[f].webkitGetAsEntry&&s[f].webkitGetAsEntry()&&s[f].webkitGetAsEntry().isDirectory){var c=s[f].webkitGetAsEntry();if(c.isDirectory&&!t)continue;null!=c&&i(a,c)}else{var d=s[f].getAsFile();null!=d&&a.push(d)}if(!r&&a.length>0)break}else{var g=e.dataTransfer.files;if(null!=g)for(var p=0;p<g.length&&(a.push(g.item(p)),r||!(a.length>0));p++);}var h=0;!function v(e){o(function(){if(u)10*h++<2e4&&v(10);else{if(!r&&a.length>1){for(f=0;"directory"===a[f].type;)f++;a=[a[f]]}n(a)}},e||0)}()}var g=n(),p=function(e,n,t){return u.attrGetter(e,r,n,t)};if(p("dropAvailable")&&o(function(){e[p("dropAvailable")]?e[p("dropAvailable")].value=g:e[p("dropAvailable")]=g}),!g)return void(p("ngfHideOnDropNotAvailable",e)===!0&&t.css("display","none"));var h,v=null,m=a(p("ngfStopPropagation")),$=1;t[0].addEventListener("dragover",function(n){if(!f()){if(n.preventDefault(),m(e)&&n.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var i=n.dataTransfer.effectAllowed;n.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy"}o.cancel(v),h||(h="C",c(e,r,n,function(e){h=e,t.addClass(h)}))}},!1),t[0].addEventListener("dragenter",function(n){f()||(n.preventDefault(),m(e)&&n.stopPropagation())},!1),t[0].addEventListener("dragleave",function(){f()||(v=o(function(){h&&t.removeClass(h),h=null},$||1))},!1),t[0].addEventListener("drop",function(n){if(!f()&&u.shouldUpdateOn("drop",r,e)){n.preventDefault(),m(e)&&n.stopPropagation(),h&&t.removeClass(h),h=null;var a=n.dataTransfer&&n.dataTransfer.getData&&n.dataTransfer.getData("text/html");if(a){var o;a.replace(/<img .*src *=\"([^\"]*)\"/,function(e,n){o=n}),o&&s({url:o,method:"get",responseType:"arraybuffer"}).then(function(t){var a=new Uint8Array(t.data),o=t.headers("content-type")||"image/jpg",l=new Blob([a],{type:o});u.updateModel(i,r,e,p("ngfChange")||p("ngfDrop"),[l],n)})}else d(n,function(t){u.updateModel(i,r,e,p("ngfChange")||p("ngfDrop"),t,n)},p("ngfAllowDir",e)!==!1,p("multiple")||p("ngfMultiple",e))}},!1),t[0].addEventListener("paste",function(n){if(!f()&&u.shouldUpdateOn("paste",r,e)){var t=[],a=n.clipboardData||n.originalEvent.clipboardData;if(a&&a.items){for(var o=0;o<a.items.length;o++)-1!==a.items[o].type.indexOf("image")&&t.push(a.items[o].getAsFile());u.updateModel(i,r,e,p("ngfChange")||p("ngfDrop"),t,n)}}},!1)}function n(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http",function(n,t,r,i,a){return{restrict:"AEC",require:"?ngModel",link:function(o,l,u,s){e(o,l,u,s,n,t,r,i,a)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,t){n()&&t.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,t,r){return function(i,a,o){if(n()){var l=e(r.attrGetter("ngfDropAvailable",o));t(function(){l(i),l.assign&&l.assign(i,!0)})}}}])}();
!function(){angular.module("dySdk",["ngFileUpload"]).constant("baseApiUrl","https://belerofonte.azurewebsites.net/")}();
!function(){function e(e,o,a){return{request:function(e){return e.headers=e.headers||{},a.localStorage.authToken&&"undefined"!==a.localStorage.authToken&&"null"!==a.localStorage.authToken&&(e.headers.Authorization="Bearer "+a.localStorage.authToken),e},response:function(e){switch(e.status){case 300:case 301:console.log("Successful API call. Redirecting.");break;case 200:case 201:case 204:console.log("Successful API call.");break;default:console.log("Successful API call.")}return e},responseError:function(o){switch(o.status){case 401:case 403:console.log("Unsuccessful API call. Authentication/Authorization failed.");break;case 404:console.log("Unsuccessful API call. Document not found.");break;case 500:console.log("Unsuccessful API call. Internal server error.");break;default:console.log("Unsuccessful API call.")}return o.data=o.data||{},e.reject(o.data)}}}angular.module("dySdk").factory("dyTokenInterceptor",e),e.$inject=["$q","$location","$window"]}();
!function(){function e(e,n,r,t,c,i,o,u,a,f){return{connection:function(){return new r},search:function(e,n,r,c,i){return t(e,n,r,c,i)},member:function(e){return new c(e)},repo:function(e){return new i(e)},workingDir:function(e){return new o(e)},commit:function(e,n){return new u(e,n)},tree:function(e,n){return new a(e,n)},dataset:function(e,n){return new f(e,n)}}}angular.module("dySdk").factory("Datary",e),e.$inject=["$q","$http","ConnectionService","searchFactory","MemberService","RepoService","WorkingDirService","CommitService","TreeService","DatasetService"]}();
!function(){function t(t,n,r){return function(e,i,o,a,u){var c=e?e.toString():"members",f=i?i.toString():"username",g=o?o.toString():".*",h=a?a.toString():"25",s=u?u.toString():"0";return URI=r+"search/"+c+"?path="+f+"&hint="+g+"&limit="+h+"&offset="+s,n.get(URI).then(function(t){return t.data},function(n){return t.reject(n)})}}angular.module("dySdk").factory("searchFactory",t),t.$inject=["$q","$http","baseApiUrl"]}();
!function(){function n(n,t,r){function o(o){return t.post(r+"connection/signIn?provider=datary",o).then(function(t){var r=null;return t.headers("X-Set-Token")?r=t.headers("X-Set-Token"):t.data&&t.data.authToken?r=t.data.authToken:(console.log("Could not parse token from HTTP reponse."),n.reject(e))},function(t){return n.reject(t)})}function u(){return t.get(r+"connection/signOut").then(function(n){return n.status},function(t){return n.reject(t)})}function i(e){return t.post(r+"connection/signUp",e).then(function(n){return n.data},function(t){return n.reject(t)})}function c(e){return t.get(r+"connection/signRequest&operation="+e.operation+"&basename="+e.basename+"&contentType="+e.contentType).then(function(n){return n.data},function(t){return n.reject(t)})}return function(){this.signIn=function(n){return o(n)},this.signOut=function(){return u()},this.signUp=function(n){return i(n)},this.signRequest=function(n){return c(n)}}}angular.module("dySdk").service("ConnectionService",n),n.$inject=["$q","$http","baseApiUrl"]}();
!function(){function n(n,t,r){function u(e){return t.get(r+e).then(function(n){return n.data},function(t){return n.reject(t)})}function i(e){return t.get(r+e+"/repos").then(function(n){return n.data},function(t){return n.reject(t)})}function c(e){return t.get(r+e+"/disclosedRepos").then(function(n){return n.data},function(t){return n.reject(t)})}function o(e){return t.get(r+e+"/privateRepos").then(function(n){return n.data},function(t){return n.reject(t)})}function f(e){return t.get(r+e+"/activity").then(function(n){return n.data},function(t){return n.reject(t)})}function s(e){return t.get(r+e+"/publicActivity").then(function(n){return n.data},function(t){return n.reject(t)})}function a(e){return t.get(r+e+"/sessions").then(function(n){return n.data},function(t){return n.reject(t)})}function h(e,u){return t.post(r+u+"/repos",e).then(function(n){return n.data},function(t){return n.reject(t)})}function d(e,u){return t.put(r+u,e).then(function(n){return n},function(t){return n.reject(t)})}function p(e,u){return t.put(r+u+"/username",u).then(function(n){return n},function(t){return n.reject(t)})}function v(e,u,i){var c={oldPassword:e,newPassword:u};return t.put(r+i+"/password",c).then(function(n){return n},function(t){return n.reject(t)})}function j(e){return t["delete"](r+e).then(function(n){return e},function(t){return n.reject(t)})}function g(u,i){return a.then(function(n){var t=n.map(function(n){return n.jti}).indexOf(u);n.splice(t,1);var e=n.map(function(n,t,e){return n.encoding});return e},function(t){return n.reject(e)}).then(function(n){var e=n;return t.put(r+i+"/sessions",e).then(function(n){return n},function(n){return n})})}return function(n){this.guid=n,this.describe=function(){return u(n)},this.retrieveRepos=function(){return i(n)},this.retrieveDisclosedRepos=function(){return c(n)},this.retrievePrivateRepos=function(){return o(n)},this.retrieveActivity=function(){return f(n)},this.retrievePublicActivity=function(){return s(n)},this.retrieveSessions=function(){return a(n)},this.createRepo=function(t){return h(t,n)},this.updateProfile=function(t){return d(t,n)},this.changeUsername=function(t){return p(t,n)},this.changePassword=function(t,e){return v(t,e,n)},this.remove=function(){return j(n)},this.removeSession=function(t){return g(t,n)}}}angular.module("dySdk").service("MemberService",n),n.$inject=["$q","$http","baseApiUrl"]}();
!function(){function n(n,t,e,r,u){function i(r){return t.get(e+r).then(function(n){return n.data},function(t){return n.reject(t)})}function c(t){return i(t).then(function(n){return new r(n.workingDir).describe()}).then(function(n){return n},function(t){return n.reject(t)})}function o(t){return i(t).then(function(n){return new u(n.apex.commit,t).retrieveFiletree()}).then(function(n){return n},function(t){return n.reject(t)})}function f(r){return t.get(e+r+"/readme").then(function(n){return n.data},function(t){return n.reject(t)})}function a(r){return t.get(e+r+"/license").then(function(n){return n.data},function(t){return n.reject(t)})}function h(r){return t.get(e+r+"/heads").then(function(n){return n.data},function(t){return n.reject(t)})}function s(r){return t.get(e+r+"/tags").then(function(n){return n.data},function(t){return n.reject(t)})}function d(r){return t.get(e+r+"/refs").then(function(n){return n.data},function(t){return n.reject(t)})}function v(r,u,i){var c=e+r;if((u||i)&&(c+="/?"),u&&(c+="namespace="+u+"&"),i)for(var o in i)c+=o+"="+i[o]+"&";return t.get(c).then(function(n){return n.data},function(t){return n.reject(t)})}function j(r,u){return t.post(e+u+"/index",r).then(function(n){return u},function(t){return n.reject(t)})}function g(r,u){return t.put(e+u+"/readme",r).then(function(n){return n},function(t){return n.reject(t)})}function m(r,u){return t.put(e+u,r).then(function(n){return u},function(t){return n.reject(t)})}function p(r){return t["delete"](e+r).then(function(n){return r},function(t){return n.reject(t)})}return function(n){this.guid=n,this.describe=function(){return i(n)},this.retrieveWorkingDir=function(){return c(n)},this.retrieveApexFiletree=function(){return o(n)},this.retrieveReadme=function(){return f(n)},this.retrieveLicense=function(){return a(n)},this.retrieveHeads=function(){return h(n)},this.retrieveTags=function(){return s(n)},this.retrieveRefs=function(){return d(n)},this.retrieveObject=function(t,e){return v(t,n,e)},this.commitIndex=function(t){return j(t,n)},this.updateReadme=function(t){return g(t,n)},this.updateDetails=function(t){return m(t,n)},this.remove=function(){return p(n)}}}angular.module("dySdk").service("RepoService",n),n.$inject=["$q","$http","baseApiUrl","WorkingDirService","CommitService"]}();
!function(){function n(n,t,e,r,o){function c(r){return t.get(e+r).then(function(n){return n.data},function(t){return n.reject(t)})}function i(r){return t.get(e+r+"/changes").then(function(n){return n.data},function(t){return n.reject(t)})}function u(r){return t.get(e+r+"/filetree").then(function(n){return n.data},function(t){return n.reject(t)})}function f(r,c){var i,u={};if("add"!==r.action)return t.post(e+c+"/changes",r).then(function(n){return n},function(t){return n.reject(t)});if(4e4===r.filemode)return t.post(e+c+"/changes",r).then(function(n){return n},function(t){return n.reject(t)});if(!("object"!=typeof r.content||r.content instanceof File))return t.post(e+c+"/changes",r).then(function(n){return n},function(n){return $reject(n)});if("string"==typeof r.content){try{u=JSON.parse(r.content)}catch(f){return n.reject(new Error("Imported file does not conforms to JSON format"))}return r.content=u,t.post(e+c+"/changes",r).then(function(n){return n},function(n){return $reject(n)})}if("object"==typeof r.content&&r.content instanceof File){if(r.content.size<10485760){var a=new FileReader,s=n.defer();return a.onload=function(){i=a.result;try{u=JSON.parse(i)}catch(n){return s.reject(new Error("Imported file does not conforms to JSON format"))}r.content=u,t.post(e+c+"/changes",r).then(function(n){console.log(20666666,n),s.resolve(n.status)},function(n){console.log(20777777,n),s.reject(n)})},a.readAsText(r.content,"UTF-8"),s.promise}return o.upload({method:"POST",url:e+c+"/changes",fields:{action:r.action,filetype:r.filetype,dirname:r.dirname,basename:r.basename,content:null,pattern:r.pattern},file:r.content})}}function a(n,r){return i.then(function(n){},function(n){}).then(function(n){var o=n;return t.put(e+r+"/changes",o).then(function(n){return n},function(n){return n})})}return function(n){this.guid=n,this.describe=function(){return c(n)},this.listChanges=function(){return i(n)},this.retrieveFiletree=function(){return u(n)},this.stageChange=function(t){return f(t,n)},this.unstageChange=function(t){return a(t,n)}}}angular.module("dySdk").service("WorkingDirService",n),n.$inject=["$q","$http","baseApiUrl","ConnectionService","Upload"]}();
!function(){function e(e,n,t){function r(r,i){var u=t;return u+=r,i&&(u+="?namespace="+i),n.get(u).then(function(e){return e.data},function(n){return e.reject(n)})}function i(r,i){var u=t;return u+=r+"/branch",i&&(u+="?namespace="+i),n.get(u).then(function(e){return e.data},function(n){return e.reject(n)})}function u(r,i){var u=t;return u+=r+"/filetree",i&&(u+="?namespace="+i),n.get(u).then(function(e){return e.data},function(n){return e.reject(n)})}return function(e,n){this.guid=e,this.namespace=n,this.describeCommit=function(){return r(e,n)},this.retrieveBranch=function(){return i(e,n)},this.retrieveFiletree=function(){return u(e,n)}}}angular.module("dySdk").service("CommitService",e),e.$inject=["$q","$http","baseApiUrl"]}();
!function(){function e(e,n,t){function r(r,i){var u=t+r;return i&&(u+="?namespace="+i),n.get(u).then(function(e){return e.data},function(n){return e.reject(n)})}return function(e,n){this.guid=e,this.namespace=n,this.describe=function(){return r(e,n)}}}angular.module("dySdk").service("TreeService",e),e.$inject=["$q","$http","baseApiUrl"]}();
!function(){function t(t,e,n){function r(r,u){var i=n+r;return u&&(i+="?namespace="+u),e.get(i).then(function(t){return t.data},function(e){return t.reject(e)})}function u(r,u){var i=n+r+"/original";return u&&(i+="?namespace="+u),e.get(i).then(function(t){return t.data},function(e){return t.reject(e)})}function i(r,u){var i=n+r+"/preview";return u&&(i+="?namespace="+u),e.get(i).then(function(t){return t.data},function(e){return t.reject(e)})}function a(r,u){var i=n+r+"/sample";return u&&(i+="?namespace="+u),e.get(i).then(function(t){return t.data},function(e){return t.reject(e)})}function c(r,u){var i=n+r+"/metadata";return u&&(i+="?namespace="+u),e.get(i).then(function(t){return t.data},function(e){return t.reject(e)})}function o(r,u){var i=n+r+"/blob";return u&&(i+="?namespace="+u),e.get(i).then(function(t){return t.data},function(e){return t.reject(e)})}return function(t,e){this.guid=t,this.namespace=e,this.describe=function(){return r(t,e)},this.retrieveOriginal=function(){return u(t,e)},this.retrievePreview=function(){return i(t,e)},this.retrieveSample=function(){return a(t,e)},this.retrieveMetadata=function(){return c(t,e)},this.retrieveBlob=function(){return o(t,e)}}}angular.module("dySdk").service("DatasetService",t),t.$inject=["$q","$http","baseApiUrl"]}();