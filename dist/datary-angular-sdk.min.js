!function(){!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(n,t){if("__setXHR_"===n){var r=t(this);r instanceof Function&&r(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var e=angular.module("ngFileUpload",[]);e.version="9.0.19",e.service("UploadBase",["$http","$q","$timeout",function(n,t,r){function i(e){function i(e){s.notify&&s.notify(e),f.progressFunc&&r(function(){f.progressFunc(e)})}function l(n){return null!=e._start&&o?{loaded:n.loaded+e._start,total:e._file.size,type:n.type,config:e,lengthComputable:!0,target:n.target}:n}function u(){n(e).then(function(n){o&&e._chunkSize&&!e._finished?(i({loaded:e._end,total:e._file.size,config:e,type:"progress"}),a.upload(e)):(e._finished&&delete e._finished,s.resolve(n))},function(e){s.reject(e)},function(e){s.notify(e)})}e.method=e.method||"POST",e.headers=e.headers||{};var s=e._deferred=e._deferred||t.defer(),f=s.promise;return e.disableProgress||(e.headers.__setXHR_=function(){return function(n){n&&n instanceof XMLHttpRequest&&(e.__XHR=n,e.xhrFn&&e.xhrFn(n),n.upload.addEventListener("progress",function(n){n.config=e,i(l(n))},!1),n.upload.addEventListener("load",function(n){n.lengthComputable&&(n.config=e,i(l(n)))},!1))}}),o?e._chunkSize&&e._end&&!e._finished?(e._start=e._end,e._end+=e._chunkSize,u()):e.resumeSizeUrl?n.get(e.resumeSizeUrl).then(function(n){e._start=e.resumeSizeResponseReader?e.resumeSizeResponseReader(n.data):parseInt((null==n.data.size?n.data:n.data.size).toString()),e._chunkSize&&(e._end=e._start+e._chunkSize),u()},function(e){throw e}):e.resumeSize?e.resumeSize().then(function(n){e._start=n,u()},function(e){throw e}):u():u(),f.success=function(n){return f.then(function(t){n(t.data,t.status,t.headers,e)}),f},f.error=function(n){return f.then(null,function(t){n(t.data,t.status,t.headers,e)}),f},f.progress=function(e){return f.progressFunc=e,f.then(null,null,function(n){e(n)}),f},f.abort=f.pause=function(){return e.__XHR&&r(function(){e.__XHR.abort()}),f},f.xhr=function(n){return e.xhrFn=function(e){return function(){e&&e.apply(f,arguments),n.apply(f,arguments)}}(e.xhrFn),f},f}var a=this;this.isResumeSupported=function(){return window.Blob&&Blob instanceof Function&&(new Blob).slice};var o=this.isResumeSupported();this.rename=function(e,n){return e.ngfName=n,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));var n=new Blob([e],{type:"application/json"});return n._ngfBlob=!0,n},this.json=function(e){return angular.toJson(e)},this.upload=function(e){function n(e){return null!=e&&(e instanceof Blob||e.flashId&&e.name&&e.size)}function t(n,t){if(n._ngfBlob)return n;if(e._file=e._file||n,null!=e._start&&o){e._end&&e._end>=n.size&&(e._finished=!0,e._end=n.size);var r=n.slice(e._start,e._end||n.size);return r.name=n.name,r.ngfName=n.ngfName,e._chunkSize&&(t.append("_chunkSize",e._end-e._start),t.append("_chunkNumber",Math.floor(e._start/e._chunkSize)),t.append("_totalSize",e._file.size)),r}return n}function r(i,a,o){if(void 0!==a)if(angular.isDate(a)&&(a=a.toISOString()),angular.isString(a))i.append(o,a);else if(n(a)){var l=t(a,i),u=o.split(",");u[1]&&(l.ngfName=u[1].replace(/^\s+|\s+$/g,""),o=u[0]),e._fileKey=e._fileKey||o,i.append(o,l,l.ngfName||l.name)}else if(angular.isObject(a)){if(a.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+o;a.$$ngfCircularDetection=!0;try{for(var s in a)if(a.hasOwnProperty(s)&&"$$ngfCircularDetection"!==s){var f=null==e.objectKey?"[i]":e.objectKey;a.length&&parseInt(s)>-1&&(f=null==e.arrayKey?f:e.arrayKey),r(i,a[s],o+f.replace(/[ik]/g,s))}}finally{delete a.$$ngfCircularDetection}}else i.append(o,a)}function l(){e._chunkSize=a.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(n){var t,i=new FormData;n=n||e.fields||{},e.file&&(n.file=e.file);for(t in n)if(n.hasOwnProperty(t)){var a=n[t];e.formDataAppender?e.formDataAppender(i,t,a):r(i,a,t)}return i})}return e._isDigested||(e._isDigested=!0,l()),i(e)},this.http=function(e){return e.transformRequest=e.transformRequest||function(e){return window.ArrayBuffer&&e instanceof window.ArrayBuffer||e instanceof Blob?e:n.defaults.transformRequest[0].apply(this,arguments)},e._chunkSize=a.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,i(e)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1e3*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1e6*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1e9*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=e.version}]),e.service("Upload",["$parse","$timeout","$compile","UploadResize",function(e,n,t,r){function i(e,n,t,r){var i=o.attrGetter("ngfResize",n,t);if(!i||!o.isResizeSupported()||!e.length)return r();if(!i.width||!i.height)throw"width and height are mandatory for ngf-resize";for(var a=e.length,l=function(){a--,0===a&&r()},u=function(n){return function(t){e.splice(n,1,t),l()}},s=function(e){return function(n){l(),e.$error="resize",e.$errorParam=(n?(n.message?n.message:n)+": ":"")+(e&&e.name)}},f=0;f<e.length;f++){var c=e[f];0===c.type.indexOf("image")?o.resize(c,i.width,i.height,i.quality).then(u(f),s(c)):l()}}function a(e,n,t,r){var i=[],a=o.attrGetter("ngfKeep",t,r);if(a){var l=!1;if("distinct"===a||o.attrGetter("ngfKeepDistinct",t,r)===!0){var u=n.length;if(e)for(var s=0;s<e.length;s++){for(var f=0;u>f;f++)if(e[s].name===n[f].name){i.push(e[s]);break}f===u&&(n.push(e[s]),l=!0)}e=n}else e=n.concat(e||[])}return{files:e,dupFiles:i,keep:a}}var o=r;return o.getAttrWithDefaults=function(e,n){if(null!=e[n])return e[n];var t=o.defaults[n];return null==t?t:angular.isString(t)?t:JSON.stringify(t)},o.attrGetter=function(n,t,r,i){var a=this.getAttrWithDefaults(t,n);if(!r)return a;try{return i?e(a)(r,i):e(a)(r)}catch(o){if(n.search(/min|max|pattern/i))return a;throw o}},o.shouldUpdateOn=function(e,n,t){var r=o.attrGetter("ngModelOptions",n,t);return!r||!r.updateOn||r.updateOn.split(" ").indexOf(e)>-1},o.updateModel=function(t,r,l,u,s,f,c){function d(i,a,s,c,d){var g=i&&i.length?i[0]:null;t&&(o.applyModelValidation(t,i),t.$ngfModelChange=!0,t.$setViewValue(d?g:i)),u&&e(u)(l,{$files:i,$file:g,$newFiles:s,$duplicateFiles:c,$invalidFiles:a,$event:f});var h=o.attrGetter("ngfModelInvalid",r);h&&n(function(){e(h).assign(l,a)}),n(function(){})}var g=s,h=(t&&t.$modelValue||r.$$ngfPrevFiles||[]).slice(0),p=a(s,h,r,l);s=p.files;var v=p.dupFiles,m=!o.attrGetter("ngfMultiple",r,l)&&!o.attrGetter("multiple",r)&&!p.keep;if(r.$$ngfPrevFiles=s,!p.keep||g&&g.length){o.validate(g,t,r,l,function(){if(c)d(s,[],g,v,m);else{var e=o.attrGetter("ngModelOptions",r,l);if(!e||!e.allowInvalid){var t=[],a=[];angular.forEach(s,function(e){e.$error?a.push(e):t.push(e)}),s=t}i(s,r,l,function(){n(function(){d(s,a,g,v,m)},e&&e.debounce?e.debounce.change||e.debounce:0)})}});for(var $=h.length;$--;){var b=h[$];window.URL&&b.blobUrl&&(URL.revokeObjectURL(b.blobUrl),delete b.blobUrl)}}},o}]),e.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,n,t,r){function i(e){var n=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(n&&n.length>2){var t=r.defaults.androidFixMinorVersion||4;return parseInt(n[1])<4||parseInt(n[1])===t&&parseInt(n[2])<t}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}function a(e,n,t,r,a,l,u,s){function f(){return"input"===n[0].tagName.toLowerCase()&&t.type&&"file"===t.type.toLowerCase()}function c(){return b("ngfChange")||b("ngfSelect")}function d(n){if(s.shouldUpdateOn("change",t,e)){for(var i=n.__files_||n.target&&n.target.files,a=[],o=0;o<i.length;o++)a.push(i[o]);s.updateModel(r,t,e,c(),a.length?a:null,n)}}function g(e){if(n!==e)for(var t=0;t<n[0].attributes.length;t++){var r=n[0].attributes[t];"type"!==r.name&&"class"!==r.name&&"id"!==r.name&&"style"!==r.name&&((null==r.value||""===r.value)&&("required"===r.name&&(r.value="required"),"multiple"===r.name&&(r.value="multiple")),e.attr(r.name,r.value))}}function h(){if(f())return n;var e=angular.element('<input type="file">');return g(e),e.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),o.push({el:n,ref:e}),document.body.appendChild(e[0]),e}function p(t){if(n.attr("disabled")||b("ngfSelectDisabled",e))return!1;var r=v(t);if(null!=r)return r;m(t);try{f()||document.body.contains(D[0])||(o.push({el:n,ref:D}),document.body.appendChild(D[0]),D.bind("change",d))}catch(a){}return i(navigator.userAgent)?setTimeout(function(){D[0].click()},0):D[0].click(),!1}function v(e){var n=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if("touchstart"===e.type)return w=n?n[0].clientY:0,!0;if(e.stopPropagation(),e.preventDefault(),"touchend"===e.type){var t=n?n[0].clientY:0;if(Math.abs(t-w)>20)return!1}}function m(n){s.shouldUpdateOn("click",t,e)&&D.val()&&(D.val(null),s.updateModel(r,t,e,c(),null,n,!0))}function $(e){if(D&&!D.attr("__ngf_ie10_Fix_")){if(!D[0].parentNode)return void(D=null);e.preventDefault(),e.stopPropagation(),D.unbind("click");var n=D.clone();return D.replaceWith(n),D=n,D.attr("__ngf_ie10_Fix_","true"),D.bind("change",d),D.bind("click",$),D[0].click(),!1}D.removeAttr("__ngf_ie10_Fix_")}var b=function(e,n){return s.attrGetter(e,t,n)};s.registerModelChangeValidator(r,t,e);var y=[];y.push(e.$watch(b("ngfMultiple"),function(){D.attr("multiple",b("ngfMultiple",e))})),y.push(e.$watch(b("ngfCapture"),function(){D.attr("capture",b("ngfCapture",e))})),t.$observe("accept",function(){D.attr("accept",b("accept"))}),y.push(function(){t.$$observers&&delete t.$$observers.accept});var w=0,D=n;f()||(D=h()),D.bind("change",d),f()?n.bind("click",m):n.bind("click touchstart touchend",p),-1!==navigator.appVersion.indexOf("MSIE 10")&&D.bind("click",$),r&&r.$formatters.push(function(e){return(null==e||0===e.length)&&D.val()&&D.val(null),e}),e.$on("$destroy",function(){f()||D.remove(),angular.forEach(y,function(e){e()})}),l(function(){for(var e=0;e<o.length;e++){var n=o[e];document.body.contains(n.el[0])||(o.splice(e,1),n.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(n,D,d)}var o=[];return{restrict:"AEC",require:"?ngModel",link:function(i,o,l,u){a(i,o,l,u,e,n,t,r)}}}]),function(){function n(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}function t(e,t,r,i,a,o,l,u){function s(n){var o=e.attrGetter("ngfNoObjectUrl",a,r);e.dataUrl(n,o)["finally"](function(){t(function(){var e=(o?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl;u?i.css("background-image","url('"+(e||"")+"')"):i.attr("src",e),e?i.removeClass("ngf-hide"):i.addClass("ngf-hide")})})}t(function(){var t=r.$watch(a[o],function(t){var r=l;if("ngfThumbnail"===o&&(r||(r={width:i[0].clientWidth,height:i[0].clientHeight}),0===r.width&&window.getComputedStyle)){var a=getComputedStyle(i[0]);r={width:parseInt(a.width.slice(0,-2)),height:parseInt(a.height.slice(0,-2))}}return angular.isString(t)?(i.removeClass("ngf-hide"),u?i.css("background-image","url('"+t+"')"):i.attr("src",t)):void(!t||!t.type||0!==t.type.search(n(i[0]))||u&&0!==t.type.indexOf("image")?i.addClass("ngf-hide"):r&&e.isResizeSupported()?e.resize(t,r.width,r.height,r.quality).then(function(e){s(e)},function(e){throw e}):s(t))});r.$on("$destroy",function(){t()})})}e.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,n,t){var r=e;return r.base64DataUrl=function(e){if(angular.isArray(e)){var n=t.defer(),i=0;return angular.forEach(e,function(t){r.dataUrl(t,!0)["finally"](function(){if(i++,i===e.length){var t=[];angular.forEach(e,function(e){t.push(e.$ngfDataUrl)}),n.resolve(t,e)}})}),n.promise}return r.dataUrl(e,!0)},r.dataUrl=function(e,r){if(r&&null!=e.$ngfDataUrl||!r&&null!=e.$ngfBlobUrl){var i=t.defer();return n(function(){i.resolve(r?e.$ngfDataUrl:e.$ngfBlobUrl,e)}),i.promise}var a=r?e.$$ngfDataUrlPromise:e.$$ngfBlobUrlPromise;if(a)return a;var o=t.defer();return n(function(){if(window.FileReader&&e&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||e.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||e.size<4e6)){var t=window.URL||window.webkitURL;if(t&&t.createObjectURL&&!r){var i;try{i=t.createObjectURL(e)}catch(a){return void n(function(){e.$ngfBlobUrl="",o.reject()})}n(function(){e.$ngfBlobUrl=i,i&&o.resolve(i,e)})}else{var l=new FileReader;l.onload=function(t){n(function(){e.$ngfDataUrl=t.target.result,o.resolve(t.target.result,e)})},l.onerror=function(){n(function(){e.$ngfDataUrl="",o.reject()})},l.readAsDataURL(e)}}else n(function(){e[r?"dataUrl":"blobUrl"]="",o.reject()})}),a=r?e.$$ngfDataUrlPromise=o.promise:e.$$ngfBlobUrlPromise=o.promise,a["finally"](function(){delete e[r?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),a},r}]);var r=angular.element("<style>.ngf-hide{display:none !important}</style>");document.getElementsByTagName("head")[0].appendChild(r[0]),e.directive("ngfSrc",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,a){t(e,n,r,i,a,"ngfSrc",e.attrGetter("ngfResize",a,r),!1)}}}]),e.directive("ngfBackground",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,a){t(e,n,r,i,a,"ngfBackground",e.attrGetter("ngfResize",a,r),!0)}}}]),e.directive("ngfThumbnail",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,a){var o=e.attrGetter("ngfSize",a,r);t(e,n,r,i,a,"ngfThumbnail",o,e.attrGetter("ngfAsBackground",a,r))}}}]),e.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]),e.filter("ngfDataUrl",["UploadDataUrl","$sce",function(e,n){return function(t,r,i){if(angular.isString(t))return n.trustAsResourceUrl(t);var a=t&&((r?t.$ngfDataUrl:t.$ngfBlobUrl)||t.$ngfDataUrl);return t&&!a?(!t.$ngfDataUrlFilterInProgress&&angular.isObject(t)&&(t.$ngfDataUrlFilterInProgress=!0,e.dataUrl(t,r)),""):(t&&delete t.$ngfDataUrlFilterInProgress,(t&&a?i?n.trustAsResourceUrl(a):a:t)||"")}}])}(),e.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,n,t){function r(e){var n="",t=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])n=e.substring(1,e.length-1);else{var i=e.split(",");if(i.length>1)for(var a=0;a<i.length;a++){var o=r(i[a]);o.regexp?(n+="("+o.regexp+")",a<i.length-1&&(n+="|")):t=t.concat(o.excludes)}else 0===e.indexOf("!")?t.push("^((?!"+r(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),n="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",n=n.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:n,excludes:t}}function i(e,n){null==n||e.$dirty||(e.$setDirty?e.$setDirty():e.$dirty=!0)}var a=e;return a.validatePattern=function(e,n){if(!n)return!0;var t=r(n),i=!0;if(t.regexp&&t.regexp.length){var a=new RegExp(t.regexp,"i");i=null!=e.type&&a.test(e.type)||null!=e.name&&a.test(e.name)}for(var o=t.excludes.length;o--;){var l=new RegExp(t.excludes[o],"i");i=i&&(null==e.type||l.test(e.type))&&(null==e.name||l.test(e.name))}return i},a.registerModelChangeValidator=function(e,n,t){e&&e.$formatters.push(function(r){e.$ngfModelChange?e.$ngfModelChange=!1:a.validate(r,e,n,t,function(){a.applyModelValidation(e,r)})})},a.applyModelValidation=function(e,n){i(e,n),angular.forEach(e.$ngfValidations,function(n){e.$setValidity(n.name,n.valid)})},a.validate=function(e,n,t,r,i){function o(t,r,i){if(e){for(var a="ngf"+t[0].toUpperCase()+t.substr(1),o=e.length,l=null;o--;){var s=e[o],f=u(a,{$file:s});null==f&&(f=r(u("ngfValidate")||{}),l=null==l||l),null!=f&&(i(s,f)||(s.$error=t,s.$errorParam=f,e.splice(o,1),l=!1))}null!==l&&n.$ngfValidations.push({name:t,valid:l})}}function l(t,r,a,o,l){if(e){var f=0,c=!1,d="ngf"+t[0].toUpperCase()+t.substr(1);e=void 0===e.length?[e]:e,angular.forEach(e,function(e){if(a&&(null==e.type||0!==e.type.search(a)))return!0;var g=u(d,{$file:e})||r(u("ngfValidate",{$file:e})||{});g&&(s++,f++,o(e,g).then(function(n){l(n,g)||(e.$error=t,e.$errorParam=g,c=!0)},function(){u("ngfValidateForce",{$file:e})&&(e.$error=t,e.$errorParam=g,c=!0)})["finally"](function(){s--,f--,f||n.$ngfValidations.push({name:t,valid:!c}),s||i.call(n,n.$ngfValidations)}))})}}n=n||{},n.$ngfValidations=n.$ngfValidations||[],angular.forEach(n.$ngfValidations,function(e){e.valid=!0});var u=function(e,n){return a.attrGetter(e,t,r,n)};if(null==e||0===e.length)return void i.call(n);if(e=void 0===e.length?[e]:e.slice(0),o("pattern",function(e){return e.pattern},a.validatePattern),o("minSize",function(e){return e.size&&e.size.min},function(e,n){return e.size>=a.translateScalars(n)}),o("maxSize",function(e){return e.size&&e.size.max},function(e,n){return e.size<=a.translateScalars(n)}),o("validateFn",function(){return null},function(e,n){return n===!0||null===n||""===n}),!e.length)return void i.call(n,n.$ngfValidations);var s=0;l("maxHeight",function(e){return e.height&&e.height.max},/image/,this.imageDimensions,function(e,n){return e.height<=n}),l("minHeight",function(e){return e.height&&e.height.min},/image/,this.imageDimensions,function(e,n){return e.height>=n}),l("maxWidth",function(e){return e.width&&e.width.max},/image/,this.imageDimensions,function(e,n){return e.width<=n}),l("minWidth",function(e){return e.width&&e.width.min},/image/,this.imageDimensions,function(e,n){return e.width>=n}),l("ratio",function(e){return e.ratio},/image/,this.imageDimensions,function(e,n){for(var t=n.toString().split(","),r=!1,i=0;i<t.length;i++){var a=t[i],o=a.search(/x/i);a=o>-1?parseFloat(a.substring(0,o))/parseFloat(a.substring(o+1)):parseFloat(a),Math.abs(e.width/e.height-a)<1e-4&&(r=!0)}return r}),l("maxDuration",function(e){return e.duration&&e.duration.max},/audio|video/,this.mediaDuration,function(e,n){return e<=a.translateScalars(n)}),l("minDuration",function(e){return e.duration&&e.duration.min},/audio|video/,this.mediaDuration,function(e,n){return e>=a.translateScalars(n)}),l("validateAsyncFn",function(){return null},null,function(e,n){return n},function(e){return e===!0||null===e||""===e}),s||i.call(n,n.$ngfValidations)},a.imageDimensions=function(e){if(e.$ngfWidth&&e.$ngfHeight){var r=n.defer();return t(function(){r.resolve({width:e.$ngfWidth,height:e.$ngfHeight})}),r.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var i=n.defer();return t(function(){return 0!==e.type.indexOf("image")?void i.reject("not image"):void a.dataUrl(e).then(function(n){function r(){var n=l[0].clientWidth,t=l[0].clientHeight;l.remove(),e.$ngfWidth=n,e.$ngfHeight=t,i.resolve({width:n,height:t})}function a(){l.remove(),i.reject("load error")}function o(){t(function(){l[0].parentNode&&(l[0].clientWidth?r():u>10?a():o())},1e3)}var l=angular.element("<img>").attr("src",n).css("visibility","hidden").css("position","fixed");l.on("load",r),l.on("error",a);var u=0;o(),angular.element(document.getElementsByTagName("body")[0]).append(l)},function(){i.reject("load error")})}),e.$ngfDimensionPromise=i.promise,e.$ngfDimensionPromise["finally"](function(){delete e.$ngfDimensionPromise}),e.$ngfDimensionPromise},a.mediaDuration=function(e){if(e.$ngfDuration){var r=n.defer();return t(function(){r.resolve(e.$ngfDuration)}),r.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var i=n.defer();return t(function(){return 0!==e.type.indexOf("audio")&&0!==e.type.indexOf("video")?void i.reject("not media"):void a.dataUrl(e).then(function(n){function r(){var n=l[0].duration;e.$ngfDuration=n,l.remove(),i.resolve(n)}function a(){l.remove(),i.reject("load error")}function o(){t(function(){l[0].parentNode&&(l[0].duration?r():u>10?a():o())},1e3)}var l=angular.element(0===e.type.indexOf("audio")?"<audio>":"<video>").attr("src",n).css("visibility","none").css("position","fixed");l.on("loadedmetadata",r),l.on("error",a);var u=0;o(),angular.element(document.body).append(l)},function(){i.reject("load error")})}),e.$ngfDurationPromise=i.promise,e.$ngfDurationPromise["finally"](function(){delete e.$ngfDurationPromise}),e.$ngfDurationPromise},a}]),e.service("UploadResize",["UploadValidate","$q","$timeout",function(e,n,t){var r=e,i=function(e,n,t,r){var i=Math.min(t/e,r/n);return{width:e*i,height:n*i}},a=function(e,t,r,a,o){var l=n.defer(),u=document.createElement("canvas"),s=document.createElement("img");return s.onload=function(){try{t||(t=s.width,r=s.height);var e=i(s.width,s.height,t,r);u.width=e.width,u.height=e.height;var n=u.getContext("2d");n.drawImage(s,0,0,e.width,e.height),l.resolve(u.toDataURL(o||"image/WebP",a||1))}catch(f){l.reject(f)}},s.onerror=function(){l.reject()},s.src=e,l.promise};return r.dataUrltoBlob=function(e){for(var n=e.split(","),t=n[0].match(/:(.*?);/)[1],r=atob(n[1]),i=r.length,a=new Uint8Array(i);i--;)a[i]=r.charCodeAt(i);return new Blob([a],{type:t})},r.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")},r.isResizeSupported()&&Object.defineProperty(Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),r.resize=function(e,i,o,l){var u=n.defer();return 0!==e.type.indexOf("image")?(t(function(){u.resolve("Only images are allowed for resizing!")}),u.promise):(r.dataUrl(e,!0).then(function(n){a(n,i,o,l,e.type).then(function(n){var t=r.dataUrltoBlob(n);t.name=e.name,u.resolve(t)},function(){u.reject()})},function(){u.reject()}),u.promise)},r}]),function(){function n(e,n,r,i,a,o,l,u,s){function f(){return n.attr("disabled")||h("ngfDropDisabled",e)}function c(e,n,t,r){var i=h("ngfDragOverClass",e,{$event:t}),a="dragover";if(angular.isString(i))a=i;else if(i&&(i.delay&&($=i.delay),i.accept||i.reject)){var o=t.dataTransfer.items;if(null!=o&&o.length)for(var l=i.pattern||h("ngfPattern",e,{$event:t}),s=o.length;s--;){if(!u.validatePattern(o[s],l)){a=i.reject;break}a=i.accept}else a=i.accept}r(a)}function d(e,n,t,r){function i(e,n,t){if(null!=n)if(n.isDirectory){var r=(t||"")+n.name;e.push({name:n.name,type:"directory",path:r});var a=n.createReader(),o=[];u++;var l=function(){a.readEntries(function(r){try{if(r.length)o=o.concat(Array.prototype.slice.call(r||[],0)),l();else{for(var a=0;a<o.length;a++)i(e,o[a],(t?t:"")+n.name+"/");u--}}catch(s){u--,console.error(s)}},function(){u--})};l()}else u++,n.file(function(n){try{u--,n.path=(t?t:"")+n.name,e.push(n)}catch(r){u--,console.error(r)}},function(){u--})}var a=[],u=0,s=e.dataTransfer.items;if(s&&s.length>0&&"file"!==l.protocol())for(var f=0;f<s.length;f++){if(s[f].webkitGetAsEntry&&s[f].webkitGetAsEntry()&&s[f].webkitGetAsEntry().isDirectory){var c=s[f].webkitGetAsEntry();if(c.isDirectory&&!t)continue;null!=c&&i(a,c)}else{var d=s[f].getAsFile();null!=d&&a.push(d)}if(!r&&a.length>0)break}else{var g=e.dataTransfer.files;if(null!=g)for(var h=0;h<g.length&&(a.push(g.item(h)),r||!(a.length>0));h++);}var p=0;!function v(e){o(function(){if(u)10*p++<2e4&&v(10);else{if(!r&&a.length>1){for(f=0;"directory"===a[f].type;)f++;a=[a[f]]}n(a)}},e||0)}()}var g=t(),h=function(e,n,t){return u.attrGetter(e,r,n,t)};if(h("dropAvailable")&&o(function(){e[h("dropAvailable")]?e[h("dropAvailable")].value=g:e[h("dropAvailable")]=g}),!g)return void(h("ngfHideOnDropNotAvailable",e)===!0&&n.css("display","none"));null==h("ngfSelect")&&u.registerModelChangeValidator(i,r,e);var p,v=null,m=a(h("ngfStopPropagation")),$=1;n[0].addEventListener("dragover",function(t){if(!f()){if(t.preventDefault(),m(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var i=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy"}o.cancel(v),p||(p="C",c(e,r,t,function(r){p=r,n.addClass(p),h("ngfDrag",e,{$isDragging:!0,$class:p,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(n){f()||(n.preventDefault(),m(e)&&n.stopPropagation())},!1),n[0].addEventListener("dragleave",function(t){f()||(t.preventDefault(),m(e)&&t.stopPropagation(),v=o(function(){p&&n.removeClass(p),p=null,h("ngfDrag",e,{$isDragging:!1,$event:t})},$||100))},!1),n[0].addEventListener("drop",function(t){if(!f()&&u.shouldUpdateOn("drop",r,e)){t.preventDefault(),m(e)&&t.stopPropagation(),p&&n.removeClass(p),p=null;var a;try{a=t.dataTransfer&&t.dataTransfer.getData&&t.dataTransfer.getData("text/html")}catch(o){}if(a){var l;a.replace(/<img .*src *=\"([^\"]*)\"/,function(e,n){l=n}),l&&s({url:l,method:"get",responseType:"arraybuffer"}).then(function(n){var a=new Uint8Array(n.data),o=n.headers("content-type")||"image/jpg",l=new Blob([a],{type:o});u.updateModel(i,r,e,h("ngfChange")||h("ngfDrop"),[l],t)})}else d(t,function(n){u.updateModel(i,r,e,h("ngfChange")||h("ngfDrop"),n,t)},h("ngfAllowDir",e)!==!1,h("multiple")||h("ngfMultiple",e))}},!1),n[0].addEventListener("paste",function(n){if(!f()&&u.shouldUpdateOn("paste",r,e)){var t=[],a=n.clipboardData||n.originalEvent.clipboardData;if(a&&a.items){for(var o=0;o<a.items.length;o++)-1!==a.items[o].type.indexOf("image")&&t.push(a.items[o].getAsFile());u.updateModel(i,r,e,h("ngfChange")||h("ngfDrop"),t,n)}}},!1)}function t(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}e.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http",function(e,t,r,i,a){return{restrict:"AEC",require:"?ngModel",link:function(o,l,u,s){n(o,l,u,s,e,t,r,i,a)}}}]),e.directive("ngfNoFileDrop",function(){return function(e,n){t()&&n.css("display","none")}}),e.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,r){return function(i,a,o){if(t()){var l=e(r.attrGetter("ngfDropAvailable",o));n(function(){l(i),l.assign&&l.assign(i,!0)})}}}])}()}();
!function(){var a=["ngFileUpload"];angular.module("dy.sdk",a).constant("dy.sdk.baseApiUrl","https://api.datary.io/")}();
!function(){function e(e,a,n){return{request:function(e){return e.headers=e.headers||{},n.localStorage.authToken&&"undefined"!==n.localStorage.authToken&&"null"!==n.localStorage.authToken&&(e.headers.Authorization="Bearer "+n.localStorage.authToken),e},response:function(e){switch(e.status){case 300:case 301:console.debug("Successful API call. Redirecting.");break;case 200:case 201:case 204:}return e},responseError:function(a){switch(a.status){case 401:case 403:console.warn("Unsuccessful API call. Authentication/Authorization failed.");break;case 404:console.warn("Unsuccessful API call. Document not found.");break;case 500:console.error("Unsuccessful API call. Internal server error.");break;default:console.error("Unsuccessful API call.")}return a.data=a.data||{},e.reject(a.data)}}}angular.module("dy.sdk").factory("dy.sdk.tokenInterceptor",e),e.$inject=["$q","$location","$window"]}();
!function(){function n(n,e,t,r,d,o,c,u,i,s){return{connection:function(){return new t},search:function(n,e,t,d,o){return r(n,e,t,d,o)},member:function(n){return new d(n)},repo:function(n){return new o(n)},workingDir:function(n){return new c(n)},commit:function(n,e){return new u(n,e)},tree:function(n,e){return new i(n,e)},dataset:function(n,e){return new s(n,e)}}}angular.module("dy.sdk").factory("dy.sdk.class",n),n.$inject=["$q","$http","dy.sdk.connection","dy.sdk.search","dy.sdk.member","dy.sdk.repo","dy.sdk.workingDir","dy.sdk.commit","dy.sdk.tree","dy.sdk.dataset"]}();
!function(){function t(t,n,r){return function(e,i,o,a,c){var u=e?e.toString():"members",s=i?i.toString():"username",d=o?o.toString():".*",f=a?a.toString():"25",g=c?c.toString():"0",h=r+"search";return h+="/"+u,h+="?path="+s,h+="&hint="+d,h+="&limit="+f,h+="&offset="+g,n.get(h).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}}angular.module("dy.sdk").factory("dy.sdk.search",t),t.$inject=["$q","$http","dy.sdk.baseApiUrl"]}();
!function(){function n(n,t,r){function c(e){return t.post(r+"connection/signUp",e).then(function(n){return n.data})["catch"](function(t){return n.reject(t)})}function o(e){return t.post(r+"connection/activate",e).then(function(n){return n.data})["catch"](function(t){return n.reject(t)})}function u(c){return t.post(r+"connection/signIn",c).then(function(t){var r=null;return t.headers("X-Set-Token")?r=t.headers("X-Set-Token"):t.data&&t.data.authToken?r=t.data.authToken:(console.log("Could not parse token from HTTP reponse."),n.reject(e))})["catch"](function(t){return n.reject(t)})}function i(e){return t.post(r+"connection/recover",{email:e}).then(function(n){return n.data})["catch"](function(t){return n.reject(t)})}function a(e){return t.post(r+"connection/reset",e).then(function(n){return n.data})["catch"](function(t){return n.reject(t)})}function s(){return t.get(r+"connection/signOut").then(function(n){return n.status})["catch"](function(t){return n.reject(t)})}function f(e){var c=r+"connection/signRequest";return c+="&operation="+e.operation,c+="&basename="+e.basename,c+="&contentType="+e.contentType,t.get(c).then(function(n){return n.data})["catch"](function(t){return n.reject(t)})}return function(){this.signUp=function(n){return c(n)},this.activate=function(n){return o(n)},this.signIn=function(n){return u(n)},this.recover=function(n){return i(n)},this.reset=function(n){return a(n)},this.signOut=function(){return s()},this.signRequest=function(n){return f(n)}}}angular.module("dy.sdk").service("dy.sdk.connection",n),n.$inject=["$q","$http","dy.sdk.baseApiUrl"]}();
!function(){function n(n,t,r){function u(e){e=e||"me";var u=r;return u+="me"===e?"me":"members/"+e,t.get(u).then(function(e){return e.data})["catch"](function(e){return n.reject(e)})}function c(e){e=e||"me";var u=r;return u+="me"===e?"me/repos":"members/"+e+"/repos",t.get(u).then(function(e){return e.data})["catch"](function(e){return n.reject(e)})}function i(e){e=e||"me";var u=r;return u+="me"===e?"me/activity":"members/"+e+"/activity",t.get(u).then(function(e){return e.data})["catch"](function(e){return n.reject(e)})}function o(e){e=e||"me";var u=r;return u+="me"===e?"me/sessions":"members/"+e+"/sessions",t.get(u).then(function(e){return e.data})["catch"](function(e){return n.reject(e)})}function s(e,u){u=u||"me";var c=r;return c+="me"===u?"me/repos":"members/"+u+"/repos",t.post(c,e).then(function(e){return e.data})["catch"](function(e){return n.reject(e)})}function m(e,u){u=u||"me";var c=r;return c+="me"===u?"me":"members/"+u,t.put(c,e).then(function(e){return e})["catch"](function(e){return n.reject(e)})}function a(e,u){u=u||"me";var c=r;return c+="me"===u?"me/username":"members/"+u+"/username",t.put(c,u).then(function(e){return e})["catch"](function(e){return n.reject(e)})}function f(e,u,c){c=c||"me";var i=r;i+="me"===c?"me/password":"members/"+c+"/password";var o={oldPassword:e,newPassword:u};return t.put(i,o).then(function(e){return e})["catch"](function(e){return n.reject(e)})}function h(e){e=e||"me";var u=r;return u+="me"===e?"me":"members/"+e,t["delete"](u).then(function(n){return e})["catch"](function(e){return n.reject(e)})}function d(u,c){return o(me).then(function(e){var n=e.map(function(e){return e.jti}).indexOf(u);e.splice(n,1);var t=e.map(function(e,n,t){return e.encoding});return t},function(t){return n.reject(e)}).then(function(e){var n=e;c=c||"me";var u=r;return u+="me"===c?"me/sessions":"members/"+c+"/sessions",t.put(u,n).then(function(e){return e})["catch"](function(e){return e})})}return function(e){this.guid=e,this.describe=function(){return u(e)},this.retrieveRepos=function(){return c(e)},this.retrieveActivity=function(){return i(e)},this.retrieveSessions=function(){return o(e)},this.createRepo=function(n){return s(n,e)},this.updateProfile=function(n){return m(n,e)},this.changeUsername=function(n){return a(n,e)},this.changePassword=function(n,t){return f(n,t,e)},this.remove=function(){return h(e)},this.removeSession=function(n){return d(n,e)}}}angular.module("dy.sdk").service("dy.sdk.member",n),n.$inject=["$q","$http","dy.sdk.baseApiUrl"]}();
!function(){function t(t,n,e,r,u){function c(r){return n.get(e+"repos/"+r).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function i(n){return c(n).then(function(t){return new r(t.workingDir).describe()}).then(function(t){return t})["catch"](function(n){return t.reject(n)})}function o(n){return c(n).then(function(t){return new u(t.apex.commit,n).retrieveFiletree()}).then(function(t){return t})["catch"](function(n){return t.reject(n)})}function f(r){var u=e+"repos/"+r+"/readme";return n.get(u).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function a(r){var u=e+"repos/"+r+"/license";return n.get(u).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function h(r){var u=e+"repos/"+r+"/heads";return n.get(u).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function s(r){var u=e+"repos/"+r+"/tags";return n.get(u).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function d(r){var u=e+"repos/"+r+"/refs";return n.get(u).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function v(r,u,c){var i=e+r;if((u||c)&&(i+="/?"),u&&(i+="namespace="+u+"&"),c)for(var o in c)i+=o+"="+c[o]+"&";return n.get(i).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function p(r,u){var c=e+"repos/"+u+"/index";return n.post(c,r).then(function(t){return u})["catch"](function(n){return t.reject(n)})}function j(r,u){var c=e+"repos/"+u+"/readme";return n.put(c,r).then(function(t){return t})["catch"](function(n){return t.reject(n)})}function g(r,u){var c=e+"repos/"+u;return n.put(c,r).then(function(t){return u})["catch"](function(n){return t.reject(n)})}function m(r){var u=e+"repos/"+r;return n["delete"](u).then(function(t){return r})["catch"](function(n){return t.reject(n)})}return function(t){this.guid=t,this.describe=function(){return c(t)},this.retrieveWorkingDir=function(){return i(t)},this.retrieveApexFiletree=function(){return o(t)},this.retrieveReadme=function(){return f(t)},this.retrieveLicense=function(){return a(t)},this.retrieveHeads=function(){return h(t)},this.retrieveTags=function(){return s(t)},this.retrieveRefs=function(){return d(t)},this.retrieveObject=function(n,e){return v(n,t,e)},this.commitIndex=function(n){return p(n,t)},this.updateReadme=function(n){return j(n,t)},this.updateDetails=function(n){return g(n,t)},this.remove=function(){return m(t)}}}angular.module("dy.sdk").service("dy.sdk.repo",t),t.$inject=["$q","$http","dy.sdk.baseApiUrl","dy.sdk.workingDir","dy.sdk.commit"]}();
!function(){function t(t,n,e,r,c){function o(r){var c=e+"workingDirs/"+r;return n.get(c).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function i(r){var c=e+"workingDirs/"+r+"/changes";return n.get(c).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function u(r){var c=e+"workingDirs/"+r+"/filetree";return n.get(c).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function a(r,o){var i,u=e+"workingDirs/"+o+"/changes",a={};if("add"!==r.action)return n.post(u,r).then(function(t){return t})["catch"](function(n){return t.reject(n)});if(4e4===r.filemode)return n.post(u,r).then(function(t){return t})["catch"](function(n){return t.reject(n)});if(!("object"!=typeof r.content||r.content instanceof File))return n.post(u,r).then(function(t){return t})["catch"](function(t){return $reject(t)});if("string"==typeof r.content){try{a=JSON.parse(r.content)}catch(f){return t.reject(new Error("Imported file does not conforms to JSON format"))}return r.content=a,n.post(u,r).then(function(t){return t})["catch"](function(t){return $reject(t)})}if("object"==typeof r.content&&r.content instanceof File){if(r.content.size<10485760){var s=new FileReader,h=t.defer();return s.onload=function(){i=s.result;try{a=JSON.parse(i)}catch(t){return h.reject(new Error("Imported file does not conforms to JSON format"))}r.content=a,n.post(u,r).then(function(t){h.resolve(t.status)})["catch"](function(t){h.reject(t)})},s.readAsText(r.content,"UTF-8"),h.promise}return c.upload({method:"POST",url:e+o+"/changes",fields:{action:r.action,filetype:r.filetype,dirname:r.dirname,basename:r.basename,content:null,pattern:r.pattern},file:r.content})}}function f(t,r){return i.then(function(t){})["catch"](function(t){}).then(function(t){var c=t,o=e+"workingDirs/"+r+"/changes";return n.put(o,c).then(function(t){return t})["catch"](function(t){return t})})}return function(t){this.guid=t,this.describe=function(){return o(t)},this.listChanges=function(){return i(t)},this.retrieveFiletree=function(){return u(t)},this.stageChange=function(n){return a(n,t)},this.unstageChange=function(n){return f(n,t)}}}angular.module("dy.sdk").service("dy.sdk.workingDir",t),t.$inject=["$q","$http","dy.sdk.baseApiUrl","dy.sdk.connection","Upload"]}();
!function(){function t(t,n,e){function r(r,c){var i=e+"commits/"+r;return c&&(i+="?namespace="+c),n.get(i).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function c(r,c){var i=e+"commits/"+r+"/branch";return c&&(i+="?namespace="+c),n.get(i).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function i(r,c){var i=e+"commits/"+r+"/filetree";return c&&(i+="?namespace="+c),n.get(i).then(function(t){return t.data})["catch"](function(n){return t.reject(n)})}function u(t,n){this.guid=t,this.namespace=n,this.describeCommit=function(){return r(t,n)},this.retrieveBranch=function(){return c(t,n)},this.retrieveFiletree=function(){return i(t,n)}}return u}angular.module("dy.sdk").service("dy.sdk.commit",t),t.$inject=["$q","$http","dy.sdk.baseApiUrl"]}();
!function(){function t(t,e,n){function r(r,c){var i=n+"trees/"+r;return c&&(i+="?namespace="+c),e.get(i).then(function(t){return t.data})["catch"](function(e){return t.reject(e)})}return function(t,e){this.guid=t,this.namespace=e,this.describe=function(){return r(t,e)}}}angular.module("dy.sdk").service("dy.sdk.tree",t),t.$inject=["$q","$http","dy.sdk.baseApiUrl"]}();
!function(){function t(t,e,n){function r(r,a){var c=n+"datasets/"+r;return a&&(c+="?namespace="+a),e.get(c).then(function(t){return t.data})["catch"](function(e){return t.reject(e)})}function a(r,a){var c=n+"datasets/"+r+"/original";return a&&(c+="?namespace="+a),e.get(c).then(function(t){return t.data})["catch"](function(e){return t.reject(e)})}function c(r,a){var c=n+"datasets/"+r+"/preview";return a&&(c+="?namespace="+a),e.get(c).then(function(t){return t.data})["catch"](function(e){return t.reject(e)})}function u(r,a){var c=n+"datasets/"+r+"/sample";return a&&(c+="?namespace="+a),e.get(c).then(function(t){return t.data})["catch"](function(e){return t.reject(e)})}function i(r,a){var c=n+"datasets/"+r+"/metadata";return a&&(c+="?namespace="+a),e.get(c).then(function(t){return t.data})["catch"](function(e){return t.reject(e)})}function s(r,a){var c=n+"datasets/"+r+"/blob";return a&&(c+="?namespace="+a),e.get(c).then(function(t){return t.data})["catch"](function(e){return t.reject(e)})}return function(t,e){this.guid=t,this.namespace=e,this.describe=function(){return r(t,e)},this.retrieveOriginal=function(){return a(t,e)},this.retrievePreview=function(){return c(t,e)},this.retrieveSample=function(){return u(t,e)},this.retrieveMetadata=function(){return i(t,e)},this.retrieveBlob=function(){return s(t,e)}}}angular.module("dy.sdk").service("dy.sdk.dataset",t),t.$inject=["$q","$http","dy.sdk.baseApiUrl"]}();